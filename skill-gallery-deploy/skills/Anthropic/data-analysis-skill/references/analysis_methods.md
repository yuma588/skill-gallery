# 数据分析方法详解

本文档详细说明数据分析中常用的方法和适用场景。

## 描述性统计方法

### 集中趋势指标

#### 均值 (Mean)
**定义**: 所有数值的总和除以数量

**公式**: μ = Σx / n

**适用场景**:
- 数据分布对称，无极端值
- 需要计算总量或平均值
- 数据分布近似正态分布

**优点**:
- 利用所有数据信息
- 数学性质良好

**缺点**:
- 对异常值敏感
- 不适合严重偏态分布

**示例**:
```
销售额: [100, 150, 200, 250, 1000]
均值 = (100+150+200+250+1000) / 5 = 340
受异常值1000影响，均值偏大
```

#### 中位数 (Median)
**定义**: 排序后位于中间的值

**适用场景**:
- 数据存在异常值
- 分布偏态严重
- 需要稳健的中心估计

**优点**:
- 抗异常值
- 稳健性好

**缺点**:
- 未充分利用所有信息

**示例**:
```
销售额排序: [100, 150, 200, 250, 1000]
中位数 = 200（不受极端值影响）
```

#### 众数 (Mode)
**定义**: 出现频率最高的值

**适用场景**:
- 分类数据分析
- 识别最常见的情况

### 离散程度指标

#### 标准差 (Standard Deviation)
**定义**: 数据点与均值的平均偏差

**公式**: σ = √[Σ(x-μ)²/n]

**适用场景**:
- 数据近似正态分布
- 需要量化波动性

**解释**:
- σ ≈ 均值 ± 68%的数据
- 2σ ≈ 均值 ± 95%的数据
- 3σ ≈ 均值 ± 99.7%的数据

#### 变异系数 (Coefficient of Variation)
**定义**: 标准差与均值的比值

**公式**: CV = σ / |μ|

**适用场景**:
- 比较不同尺度数据的波动性

**判断标准**:
- CV < 0.1: 低波动
- 0.1 ≤ CV ≤ 0.3: 中等波动
- CV > 0.3: 高波动

#### 四分位数
**定义**: 将数据分为四等份的三个值

- **Q1 (25%)**: 下四分位数
- **Q2 (50%)**: 中位数
- **Q3 (75%)**: 上四分位数

**用途**: 识别数据分布和异常值

### 分布形状指标

#### 偏度 (Skewness)
**定义**: 衡量分布不对称性

**判断标准**:
- 偏度 = 0: 对称分布
- 偏度 > 0: 正偏（右侧长尾）
- 偏度 < 0: 负偏（左侧长尾）

**实际意义**:
| 偏度范围 | 含义 | 数据特点 |
|---------|------|---------|
| [-0.5, 0.5] | 近似对称 | 正常分布 |
| (0.5, 1] | 中度正偏 | 有少量高值 |
| [-1, -0.5) | 中度负偏 | 有少量低值 |
| > 1 或 < -1 | 严重偏态 | 明显不对称 |

**处理建议**:
- 正偏态: 考虑对数转换
- 负偏态: 考虑平方或指数转换
- 严重偏态: 使用中位数替代均值

#### 峰度 (Kurtosis)
**定义**: 衡量分布的尖峭程度

**判断标准**:
- 峰度 = 0: 与正态分布相同
- 峰度 > 0: 尖峰分布（数据集中在中心）
- 峰度 < 0: 平峰分布（数据分散）

**实际意义**:
| 峰度范围 | 含义 | 数据特点 |
|---------|------|---------|
| [-0.5, 0.5] | 接近正态 | 正常分布 |
| (0.5, 1] | 较尖峰 | 数据较集中 |
| [-1, -0.5) | 较平峰 | 数据较分散 |
| > 1 或 < -1 | 严重异常 | 明显偏离正态 |

## 趋势分析方法

### 移动平均 (Moving Average)

**定义**: 对连续n个数据点取平均值

**类型**:
1. **简单移动平均 (SMA)**
   - 所有数据点权重相同

2. **加权移动平均 (WMA)**
   - 近期数据权重更高

3. **指数移动平均 (EMA)**
   - 指数递减权重

**窗口期选择**:
| 场景 | 推荐窗口 |
|------|---------|
| 日数据 | 7-20天 |
| 周数据 | 4-12周 |
| 月数据 | 3-12个月 |

**用途**:
- 平滑短期波动
- 识别长期趋势
- 消除季节性影响

### 线性回归

**定义**: 拟合线性模型 y = ax + b

**输出**:
- **斜率 (a)**: 趋势方向和强度
- **截距 (b)**: 起始值
- **R² (R方)**: 拟合优度

**R² 解释**:
- R² > 0.7: 强趋势
- 0.3 < R² ≤ 0.7: 中等趋势
- R² ≤ 0.3: 弱或无趋势

**斜率解读**:
| 斜率值 | 含义 | 行动建议 |
|---------|------|---------|
| > 0.1*均值 | 强劲上升 | 保持并扩大优势 |
| 0.01*均值 ~ 0.1*均值 | 温和上升 | 监测并优化 |
| -0.01*均值 ~ 0.01*均值 | 基本平稳 | 探索新机会 |
| < -0.1*均值 | 明显下降 | 立即干预 |

### 增长率计算

#### 环比增长率 (Month-over-Month)
**公式**: (本月 - 上月) / 上月 × 100%

**适用场景**:
- 月度数据分析
- 短期趋势监测

#### 同比增长率 (Year-over-Year)
**公式**: (今年某月 - 去年同月) / 去年同月 × 100%

**适用场景**:
- 消除季节性影响
- 长期趋势评估

#### 累计增长率 (Cumulative Growth)
**公式**: (当前值 - 初始值) / 初始值 × 100%

**适用场景**:
- 整体增长评估
- 目标达成分析

## 异常检测方法

### Z-score方法
**定义**: 数据点距离均值的标准化距离

**公式**: Z = (x - μ) / σ

**判断标准**:
- |Z| > 2: 可能异常
- |Z| > 3: 高度异常

**适用场景**:
- 数据近似正态分布
- 需要量化异常程度

### IQR方法（四分位距法）
**定义**: 使用四分位数识别异常值

**判断标准**:
- 下界: Q1 - 1.5 × IQR
- 上界: Q3 + 1.5 × IQR
- 超出范围的为异常值

**适用场景**:
- 数据非正态分布
- 鲁棒的异常检测

### 季节性分析

#### 移动平均法
**步骤**:
1. 计算移动平均（消除季节性）
2. 计算原始值与移动平均的比值
3. 按周期分组平均比值

#### 信号分解
**方法**: STL (Seasonal-Trend Decomposition)

**组成**:
- 趋势项 (Trend)
- 季节项 (Seasonal)
- 残差项 (Residual)

## 可视化方法

### 折线图
**用途**:
- 时间序列趋势展示
- 多序列对比

**最佳实践**:
- 时间轴从左到右
- 使用图例区分不同系列
- 突出关键转折点

### 柱状图
**用途**:
- 分类数据对比
- 数值大小比较

**最佳实践**:
- 按数值排序
- 使用一致的基线
- 添加数值标签

### 散点图
**用途**:
- 相关性分析
- 聚类识别

**最佳实践**:
- 标注相关系数
- 添加趋势线
- 识别异常点

### 箱线图
**用途**:
- 分布比较
- 异常值检测

**组成部分**:
- 中线: 中位数
- 箱体: Q1到Q3
- 须: 1.5×IQR范围
- 点: 异常值

## 方法选择指南

### 根据数据类型

| 数据类型 | 推荐方法 | 洞察类型 |
|---------|---------|---------|
| 数值型 | 描述性统计、趋势分析 | 集中趋势、波动性、趋势 |
| 时间序列 | 移动平均、回归、分解 | 趋势、季节性、周期 |
| 分类型 | 频数分析、比例分析 | 分布、占比 |

### 根据分析目标

| 目标 | 推荐方法 | 输出 |
|------|---------|------|
| 了解数据概况 | 描述性统计 | 均值、标准差、分布 |
| 发现变化趋势 | 趋势分析 | 趋势线、增长率 |
| 识别异常情况 | 异常检测 | 异常点列表 |
| 探索因果关系 | 相关性分析 | 相关系数、散点图 |
| 发现周期规律 | 季节性分析 | 季节因子、周期 |

### 根据数据特征

| 特征 | 问题 | 解决方法 |
|------|------|---------|
| 存在异常值 | 均值失真 | 使用中位数或 trimmed mean |
| 高变异性 | 标准差过大 | 分组分析、归一化 |
| 严重偏态 | 分布不对称 | 数据转换 |
| 缺失值多 | 数据质量差 | 插值或删除 |
| 多重共线性 | 相关性过高 | PCA或删除冗余变量 |
