---
name: code-review
description: ç»¼åˆæ€§ä»£ç å®¡æŸ¥æŠ€èƒ½ï¼Œæ”¯æŒå¤šè¯­è¨€ä»£ç è´¨é‡åˆ†æã€å®‰å…¨æ¼æ´æ£€æµ‹ã€æ€§èƒ½é—®é¢˜è¯†åˆ«å’Œç¼–ç è§„èŒƒæ£€æŸ¥ã€‚å½“ç”¨æˆ·éœ€è¦å®¡æŸ¥ä»£ç è´¨é‡ã€æŸ¥æ‰¾æ½œåœ¨ç¼ºé™·ã€éªŒè¯å®‰å…¨åˆè§„æ€§æˆ–ç”Ÿæˆç»“æ„åŒ–å®¡æŸ¥æŠ¥å‘Šæ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ã€‚æ”¯æŒ JavaScript/TypeScriptã€Pythonã€Java ç­‰ä¸»æµè¯­è¨€ï¼Œå¯é›†æˆ ESLintã€Pylintã€Bandit ç­‰åˆ†æå·¥å…·ã€‚
---

# ä»£ç å®¡æŸ¥æŠ€èƒ½

## æ¦‚è¿°

æœ¬æŠ€èƒ½æä¾›ç³»ç»ŸåŒ–çš„ä»£ç å®¡æŸ¥èƒ½åŠ›ï¼Œå¸®åŠ©å¼€å‘è€…è¯†åˆ«ä»£ç ä¸­çš„è´¨é‡é—®é¢˜ã€å®‰å…¨æ¼æ´å’Œæ€§èƒ½ç“¶é¢ˆã€‚é€šè¿‡é›†æˆå¤šç§é™æ€åˆ†æå·¥å…·å’Œè‡ªå®šä¹‰æ£€æŸ¥è§„åˆ™ï¼Œç”Ÿæˆç»“æ„åŒ–çš„å®¡æŸ¥æŠ¥å‘Šï¼Œæä¾›å…·ä½“çš„ä¿®å¤å»ºè®®ã€‚

## å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

1. **è¯†åˆ«ä»£ç è¯­è¨€å’Œæ–‡ä»¶ç±»å‹**
   - æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨é€‰æ‹©åˆ†æå·¥å…·
   - JavaScript/TypeScript: `.js`, `.ts`, `.jsx`, `.tsx`
   - Python: `.py`
   - Java: `.java`
   - Go: `.go`

2. **è¿è¡Œç›¸åº”çš„åˆ†æè„šæœ¬**
   ```bash
   # JavaScript/TypeScript
   node scripts/analyze_javascript.js path/to/code.js

   # Python
   python scripts/analyze_python.py path/to/code.py

   # ç»Ÿä¸€åˆ†æï¼ˆè‡ªåŠ¨è¯†åˆ«è¯­è¨€ï¼‰
   node scripts/run_code_analysis.js path/to/code
   ```

3. **æŸ¥çœ‹ç”Ÿæˆçš„å®¡æŸ¥æŠ¥å‘Š**
   - æŠ¥å‘Šå°†ç”Ÿæˆåœ¨ `reviews/` ç›®å½•
   - æ”¯æŒ Markdown å’Œ HTML æ ¼å¼

4. **æ ¹æ®å»ºè®®è¿›è¡Œä»£ç ä¼˜åŒ–**
   - ä½¿ç”¨è‡ªåŠ¨ä¿®å¤å·¥å…·åº”ç”¨å¯ä¿®å¤çš„é—®é¢˜
   - å‚è€ƒæŠ¥å‘Šä¸­çš„ä¿®å¤å»ºè®®

## æ ¸å¿ƒå·¥ä½œæµ

### 1. ä»£ç åˆ†æ

æ ¹æ®æ–‡ä»¶æ‰©å±•åè‡ªåŠ¨é€‰æ‹©åˆ†æå·¥å…·ï¼š

| è¯­è¨€ | æ–‡ä»¶æ‰©å±•å | åˆ†æå·¥å…· |
|------|-----------|---------|
| JavaScript | `.js`, `.jsx` | ESLint |
| TypeScript | `.ts`, `.tsx` | ESLint + TypeScript |
| Python | `.py` | Pylint + Bandit |
| Java | `.java` | Checkstyle + SpotBugs |
| Go | `.go` | golint + go vet |

### 2. é—®é¢˜åˆ†ç±»

å°†å‘ç°é—®é¢˜åˆ†ä¸ºä¸‰ç±»ï¼š

- **ğŸ”´ ä¸¥é‡é—®é¢˜ (Critical)**ï¼šå®‰å…¨æ¼æ´ã€å´©æºƒé£é™©ã€æ•°æ®æ³„éœ²
  - SQLæ³¨å…¥ã€XSSæ”»å‡»
  - ç¡¬ç¼–ç å¯†é’¥/å¯†ç 
  - æœªå¤„ç†çš„å¼‚å¸¸
  - èµ„æºæ³„æ¼ï¼ˆæœªå…³é—­çš„æ–‡ä»¶/è¿æ¥ï¼‰

- **ğŸŸ¡ è­¦å‘Š (Warning)**ï¼šç¼–ç è§„èŒƒè¿åã€æ½œåœ¨æ€§èƒ½é—®é¢˜
  - æœªä½¿ç”¨çš„å˜é‡/å‡½æ•°
  - è¿‡é«˜çš„åœˆå¤æ‚åº¦
  - å¤§æ–‡ä»¶/å¤§å‡½æ•°
  - æ€§èƒ½åæ¨¡å¼

- **ğŸ”µ å»ºè®® (Suggestion)**ï¼šä»£ç å¯è¯»æ€§ã€æœ€ä½³å®è·µæ”¹è¿›
  - å‘½åè§„èŒƒå»ºè®®
  - æ³¨é‡Šç¼ºå¤±
  - ä»£ç é‡å¤
  - è®¾è®¡æ¨¡å¼åº”ç”¨

### 3. æŠ¥å‘Šç”Ÿæˆ

ä½¿ç”¨ `scripts/generate_report.js` ç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Šï¼š

```javascript
node scripts/generate_report.js --input analysis_result.json --output reviews/report.md
```

æŠ¥å‘ŠåŒ…å«ï¼š
- æ‰§è¡Œæ‘˜è¦ï¼ˆé—®é¢˜æ€»æ•°ã€ä¸¥é‡ç¨‹åº¦åˆ†å¸ƒï¼‰
- è¯¦ç»†é—®é¢˜åˆ—è¡¨ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
- ä»£ç ä½ç½®å¼•ç”¨
- å…·ä½“ä¿®å¤å»ºè®®
- è‡ªåŠ¨åŒ–ä¿®å¤å‘½ä»¤

### 4. è‡ªåŠ¨ä¿®å¤

å¯¹äºå¯è‡ªåŠ¨ä¿®å¤çš„é—®é¢˜ï¼š

```bash
# JavaScript
node scripts/apply_fixes.js --file path/to/code.js --fix-level warning

# Python
python scripts/apply_fixes.py --file path/to/code.py --fix-level warning
```

## èµ„æºä½¿ç”¨æŒ‡å—

### è„šæœ¬ç›®å½• (scripts/)

| è„šæœ¬æ–‡ä»¶ | åŠŸèƒ½æè¿° | ä½¿ç”¨åœºæ™¯ |
|---------|---------|---------|
| `run_code_analysis.js` | ç»Ÿä¸€å…¥å£ï¼Œæ ¹æ®æ–‡ä»¶ç±»å‹è°ƒç”¨ç›¸åº”åˆ†æå·¥å…· | æ‰¹é‡åˆ†æã€è‡ªåŠ¨åŒ–æµç¨‹ |
| `analyze_javascript.js` | ä½¿ç”¨ ESLint åˆ†æ JS/TS ä»£ç ï¼Œè¾“å‡ºç»“æ„åŒ–ç»“æœ | JS/TS ä»£ç å®¡æŸ¥ |
| `analyze_python.js` | ä½¿ç”¨ Pylint + Bandit åˆ†æ Python ä»£ç  | Python ä»£ç å®¡æŸ¥ |
| `analyze_java.js` | ä½¿ç”¨ Checkstyle + SpotBugs åˆ†æ Java ä»£ç  | Java ä»£ç å®¡æŸ¥ |
| `generate_report.js` | å°†åˆ†æç»“æœè½¬æ¢ä¸º Markdown/HTML æŠ¥å‘Š | ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š |
| `apply_fixes.js` | è‡ªåŠ¨åº”ç”¨å¯å®‰å…¨ä¿®å¤çš„é—®é¢˜ï¼ˆå¦‚æ ¼å¼åŒ–ï¼‰ | å¿«é€Ÿä¿®å¤è§„èŒƒé—®é¢˜ |

### å‚è€ƒæ–‡æ¡£ (references/)

| å‚è€ƒæ–‡æ¡£ | å†…å®¹ | ç”¨é€” |
|---------|------|------|
| `code_quality_guidelines.md` | ä»£ç è´¨é‡æ£€æŸ¥æ¸…å•ï¼ˆåœˆå¤æ‚åº¦ã€é‡å¤ç‡é˜ˆå€¼ç­‰ï¼‰ | è´¨é‡è¯„ä¼°æ ‡å‡† |
| `security_checklist.md` | å®‰å…¨æ¼æ´æ¨¡å¼ï¼ˆSQLæ³¨å…¥ã€XSSã€ç¡¬ç¼–ç å¯†é’¥ç­‰ï¼‰ | å®‰å…¨å®¡æŸ¥ä¾æ® |
| `performance_patterns.md` | æ€§èƒ½åæ¨¡å¼ï¼ˆN+1æŸ¥è¯¢ã€æœªå…³é—­èµ„æºã€å¤§å¾ªç¯ç­‰ï¼‰ | æ€§èƒ½ä¼˜åŒ–æŒ‡å— |
| `language_specific_rules/` | å„è¯­è¨€çš„ç¼–ç è§„èŒƒï¼ˆAirbnb JS è§„èŒƒã€Google Python é£æ ¼ç­‰ï¼‰ | ç¼–ç è§„èŒƒå‚è€ƒ |
| `tool_configurations/` | å„å·¥å…·çš„é…ç½®æ–‡ä»¶ï¼ˆ.eslintrc.jsonã€.pylintrc ç­‰ï¼‰ | å·¥å…·é…ç½®æ¨¡æ¿ |

### èµ„æºæ–‡ä»¶ (assets/)

| èµ„æºæ–‡ä»¶ | ç”¨é€” |
|---------|------|
| `report_template.md` | å®¡æŸ¥æŠ¥å‘Š Markdown æ¨¡æ¿ |
| `report_template.html` | å®¡æŸ¥æŠ¥å‘Š HTML æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰ |
| `example_reviews/` | ç¤ºä¾‹å®¡æŸ¥ï¼ˆå±•ç¤ºè‰¯å¥½å’Œä¸è‰¯ä»£ç æ¡ˆä¾‹ï¼‰ |

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå®¡æŸ¥å•ä¸ª Python æ–‡ä»¶

```bash
# è¿è¡Œåˆ†æ
python scripts/analyze_python.py my_app.py

# ç”ŸæˆæŠ¥å‘Š
node scripts/generate_report.js --input analysis_result.json --output reviews/my_app_review.md

# æŸ¥çœ‹æŠ¥å‘Š
cat reviews/my_app_review.md
```

### ç¤ºä¾‹ 2ï¼šæ‰¹é‡å®¡æŸ¥ JavaScript é¡¹ç›®

```bash
# åˆ†ææ•´ä¸ªé¡¹ç›®
node scripts/run_code_analysis.js src/

# ç”Ÿæˆç»¼åˆæŠ¥å‘Š
node scripts/generate_report.js --input src_analysis.json --output reviews/project_review.md

# è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
node scripts/apply_fixes.js --directory src/ --fix-level suggestion
```

### ç¤ºä¾‹ 3ï¼šå®‰å…¨æ¼æ´ä¸“é¡¹æ£€æŸ¥

```bash
# ä½¿ç”¨ Bandit æ£€æŸ¥ Python å®‰å…¨é—®é¢˜
bandit -r my_project/ -f json -o security_scan.json

# ç”Ÿæˆå®‰å…¨æŠ¥å‘Š
node scripts/generate_report.js --input security_scan.json --type security --output reviews/security_report.md
```

## é«˜çº§åŠŸèƒ½

### è‡ªå®šä¹‰è§„åˆ™

1. **ä¿®æ”¹ ESLint é…ç½®**
   - ç¼–è¾‘ `references/tool_configurations/.eslintrc.json`
   - æ·»åŠ è‡ªå®šä¹‰è§„åˆ™æˆ–è°ƒæ•´ç°æœ‰è§„åˆ™

2. **æ‰©å±• Pylint è§„åˆ™**
   - ç¼–è¾‘ `references/tool_configurations/.pylintrc`
   - å¯ç”¨/ç¦ç”¨ç‰¹å®šæ£€æŸ¥

3. **æ·»åŠ è‡ªå®šä¹‰æ£€æŸ¥è„šæœ¬**
   - åœ¨ `scripts/` ç›®å½•åˆ›å»ºæ–°è„šæœ¬
   - éµå¾ªç»Ÿä¸€çš„è¾“å‡ºæ ¼å¼

### é›†æˆåˆ° CI/CD

åœ¨ GitHub Actions ä¸­ä½¿ç”¨ï¼š

```yaml
name: Code Review
on: [push, pull_request]
jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run Code Review
        run: |
          node scripts/run_code_analysis.js src/
          node scripts/generate_report.js --input src_analysis.json --output reviews/pr_review.md
```

### å¯¼å‡ºä¸ºå…¶ä»–æ ¼å¼

```bash
# å¯¼å‡ºä¸º PDF
pandoc reviews/report.md -o reviews/report.pdf

# å¯¼å‡ºä¸º JSONï¼ˆä¾›å…¶ä»–å·¥å…·ä½¿ç”¨ï¼‰
node scripts/generate_report.js --input analysis_result.json --format json --output reviews/report.json
```

## è¾“å‡ºæ¨¡å¼

æœ¬æŠ€èƒ½æ”¯æŒå¤šç§è¾“å‡ºæ¨¡å¼ï¼Œæ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©ï¼š

### æ¨¡å¼ 1: å¿«é€Ÿæ‰«æ (Quick Scan)
- ä»…æ£€æŸ¥ä¸¥é‡é—®é¢˜
- é€‚ç”¨äºå¼€å‘è¿‡ç¨‹ä¸­å¿«é€ŸéªŒè¯
- è¾“å‡ºç®€çŸ­çš„é—®é¢˜åˆ—è¡¨

### æ¨¡å¼ 2: æ ‡å‡†å®¡æŸ¥ (Standard Review)
- æ£€æŸ¥æ‰€æœ‰é—®é¢˜çº§åˆ«
- åŒ…å«ä¿®å¤å»ºè®®å’Œä»£ç ç¤ºä¾‹
- é€‚ç”¨äº Pull Request å®¡æŸ¥

### æ¨¡å¼ 3: æ·±åº¦åˆ†æ (Deep Analysis)
- åŒ…å«ä»£ç åº¦é‡æŒ‡æ ‡
- ç”Ÿæˆè¶‹åŠ¿åˆ†æå’Œæ”¹è¿›å»ºè®®
- é€‚ç”¨äºé¡¹ç›®å¥åº·åº¦è¯„ä¼°

## æœ€ä½³å®è·µ

1. **å®šæœŸå®¡æŸ¥**ï¼šå°†ä»£ç å®¡æŸ¥çº³å…¥æ—¥å¸¸å¼€å‘æµç¨‹
2. **æ¸è¿›ä¿®å¤**ï¼šä¼˜å…ˆä¿®å¤ä¸¥é‡é—®é¢˜ï¼Œå†é€æ­¥å¤„ç†è­¦å‘Šå’Œå»ºè®®
3. **å›¢é˜Ÿåä½œ**ï¼šå°†å®¡æŸ¥è§„åˆ™å…±äº«ç»™å›¢é˜Ÿï¼Œä¿æŒä¸€è‡´æ€§
4. **æŒç»­æ”¹è¿›**ï¼šæ ¹æ®å®é™…å®¡æŸ¥ç»“æœè°ƒæ•´è§„åˆ™å’Œé˜ˆå€¼
5. **æ–‡æ¡£ç»´æŠ¤**ï¼šåŠæ—¶æ›´æ–°å‚è€ƒæ–‡æ¡£å’Œç¤ºä¾‹ä»£ç 

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•æ·»åŠ å¯¹æ–°è¯­è¨€çš„æ”¯æŒï¼Ÿ**

A: åœ¨ `scripts/` ç›®å½•åˆ›å»ºæ–°çš„åˆ†æè„šæœ¬ï¼Œéµå¾ªç°æœ‰è„šæœ¬çš„è¾“å‡ºæ ¼å¼ï¼Œå¹¶æ›´æ–° `references/` ä¸­çš„è¯­è¨€è§„èŒƒæ–‡æ¡£ã€‚

**Q: å¦‚ä½•ç¦ç”¨æŸäº›è§„åˆ™ï¼Ÿ**

A: ç¼–è¾‘å¯¹åº”çš„å·¥å…·é…ç½®æ–‡ä»¶ï¼ˆå¦‚ `.eslintrc.json`ï¼‰ï¼Œåœ¨è§„åˆ™åˆ—è¡¨ä¸­è®¾ç½® `"rule-name": "off"`ã€‚

**Q: å®¡æŸ¥ç»“æœå¯ä»¥å¯¼å‡ºåˆ°å“ªäº›æ ¼å¼ï¼Ÿ**

A: æ”¯æŒ Markdownã€HTMLã€JSONã€PDF ç­‰æ ¼å¼ã€‚ä½¿ç”¨ `generate_report.js` çš„ `--format` å‚æ•°æŒ‡å®šã€‚

**Q: å¦‚ä½•æé«˜å®¡æŸ¥é€Ÿåº¦ï¼Ÿ**

A: ä½¿ç”¨ `--quick` æ¨¡å¼è¿›è¡Œå¿«é€Ÿæ‰«æï¼Œæˆ–é™åˆ¶å®¡æŸ¥èŒƒå›´ï¼ˆåªå®¡æŸ¥ä¿®æ”¹çš„æ–‡ä»¶ï¼‰ã€‚

## æœ¯è¯­è¡¨

- **åœˆå¤æ‚åº¦ (Cyclomatic Complexity)**ï¼šè¡¡é‡ä»£ç å¤æ‚åº¦çš„æŒ‡æ ‡ï¼Œå»ºè®®æ§åˆ¶åœ¨10ä»¥ä¸‹
- **æŠ€æœ¯å€ºåŠ¡ (Technical Debt)**ï¼šä¸ºå¿«é€Ÿäº¤ä»˜è€Œç´¯ç§¯çš„ä»£ç è´¨é‡æ”¹è¿›éœ€æ±‚
- **é™æ€åˆ†æ (Static Analysis)**ï¼šåœ¨ä¸æ‰§è¡Œä»£ç çš„æƒ…å†µä¸‹åˆ†æä»£ç è´¨é‡çš„æ–¹æ³•
- **Linter**ï¼šç”¨äºæ£€æŸ¥ä»£ç é£æ ¼å’Œæ½œåœ¨é”™è¯¯çš„å·¥å…·
- **False Positive**ï¼šè¯¯æŠ¥ï¼Œå³å·¥å…·é”™è¯¯åœ°æ ‡è®°äº†æ²¡æœ‰é—®é¢˜çš„ä»£ç 

## ç›¸å…³æŠ€èƒ½

- `skill-creator`: ç”¨äºåˆ›å»ºå’Œæ‰“åŒ…æ­¤æŠ€èƒ½
- `doc-coauthoring`: ç”Ÿæˆå®¡æŸ¥æ–‡æ¡£å’Œæœ€ä½³å®è·µæŒ‡å—
- `testing`: å•å…ƒæµ‹è¯•å’Œæµ‹è¯•è¦†ç›–ç‡åˆ†æ

## åé¦ˆä¸è´¡çŒ®

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚
